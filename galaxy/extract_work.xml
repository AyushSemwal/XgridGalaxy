<tool id="vcf_extract_DBSNP" name="Extract and annotate dbSNP and VCF file" version="1.0.0">
  <description>Reads fom a specified region of both DBSNP and target VCF file, then using SNPsift annotates the file accordingly </description>
  <command interpreter="bash">

  #if $ifChosenRegion.display_region != "true":
    ./vcf_extract_wrapper.sh $input1 $output1 $err_output $dbsnp $variants_annotated
  #else
  ./vcf_extract_wrapper.sh $input1 $output1 $err_output $dbsnp $variants_annotated "${ifChosenRegion.region}"
  #end if
  </command>
  <inputs>
    <param name="input1" label="VCF file" type="data" format="vcf" />
    <conditional name="ifChosenRegion">
    <param name="display_region" label="Extract records from this region" type="select" help="If you do not select this it will find the chromosome and region from your input file automatically">
    <option value="auto">Automatically select region from DBSNP</option>
    <option value="manual">Manually select region</option>
    </param>
	
     <when value="manual">
        <param name ="region" label="Type in region" type="text" help="The format of the region is ref:start-end, where the and end coordinates are 1-based" optional="false"/>
    </when>
    </conditional>
  </inputs>
  <outputs> 
    <data format="vcf" name="output1" label="${tool.name} from ${on_string}" />
    <data format="vcf" name="dbsnp"   label="${tool.name} from ${on_string}.dbsnp"/>
    <data name="variants_annotated" label="${tool.name} annotated from ${on_string}" format="vcf"/>
    <data name="err_output" format="txt"/>
  </outputs>
</tool>
