<tool id="ou_snp_extraction" name="SNP Extraction">
    <description> 
        Takes a list of SNPs and returns a new ped/map with only those SNPs specified
    </description>
    <command>
        echo $snplist | tr -s "__cr____cn__" "\n" > snplist.txt
        ;
        plink --noweb --file "$input_lped.extra_files_path/$input_lped.metadata.base_name"
        --extract snplist.txt
        --recode 
        --out $input_lped.metadata.base_name 
        $no_sex
        ;
        python ${__root_dir__}/tool-data/shared/composite_datatypes/create_composite_rgenetics.py 'lped' $output_lped $input_lped.metadata.base_name $output_lped.extra_files_path
    </command>

    <inputs>
        <param name="input_lped" type="data" format="lped" label="Lped Input" help="Contains your map and ped file." />
        <param name="snplist" type="text" area="True" size="20x30" label="SNPs to extract" help="Please enter each SNP rs#, one per line." />
        <param name="no_sex" type="select" label="Allow no-sex samples to be included" >
            <option value="--allow-no-sex" selected="True">Yes</option>
            <option value="">No</option>
        </param>

    </inputs>

    <outputs>
        <data name="output_lped" format="lped" metadata_source="input_lped" />
    </outputs>

</tool>
